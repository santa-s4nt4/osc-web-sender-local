# Web OSC Sender (Offline Version)

インターネット接続がない完全にオフラインのローカルネットワークで、ブラウザからOSCメッセージを送信するためのWebアプリケーションです。

PC上でローカルWebサーバーとOSC中継サーバーを起動し、同じネットワークに接続されたスマートフォンや他のPCから操作します。

## ✨ 主な機能

- **完全オフライン動作**: インターネット接続は一切不要です。
- **ローカルサーバー**: PCがWebサーバーと中継サーバーの両方を兼ねます。
- **動的な接続先**: 操作するブラウザ上で、中継サーバーのIPアドレスやOSCの送信先を自由に設定できます。

## ⚙️ 仕組み

1.  **ローカルWebサーバー (`serve`)**: `index.html`と`main.js`を、ローカルネットワークに配信します。
2.  **OSC中継サーバー (`server.js`)**: ブラウザからのWebSocket (`ws://`) 接続を受け付け、OSCメッセージを送信します。

**通信の流れ:**
`ブラウザ` → `ローカルHTTP` → `PC上のWebサーバー` (ページ読込)
`ブラウザ` → `ローカルWS` → `PC上の中継サーバー` → `UDP (OSC)` → `OSC受信アプリ`

## 必要なもの

- [Node.js](https://nodejs.org/) (v14以上を推奨)

## 🚀 使い方

### ステップ1：セットアップ

まず、サーバーを動かすPCで以下の準備をします。

```bash
# 1. このプロジェクト用の新しいフォルダを作成し、移動します。
# mkdir osc-web-sender-offline
# cd osc-web-sender-offline

# 2. 必要なライブラリをインストールします。
# Webサーバー用の 'serve' も含めます。
npm init -y
npm install ws node-osc serve
```

### ステップ2：サーバーの起動
2つのターミナルを使って、2種類のサーバーを起動します。

ターミナル①：Webサーバーの起動
プロジェクトフォルダで以下のコマンドを実行し、index.htmlを配信します。

```
npx serve
```

ターミナルに以下のような情報が表示されます。この**Network**のアドレスを控えておきます。
```
  Serving!
  - Local:    http://localhost:3000
  - Network:  [http://192.168.1.3:3000](http://192.168.1.3:3000)  <- このアドレスを使います
```

このターミナルは開いたままにしてください。

ターミナル②：OSC中継サーバーの起動
新しいターミナルを開き、同じプロジェクトフォルダで以下のコマンドを実行します。
```
node server.js
```

🚀 OSC Relay Server (Simple WS) has started!`と表示されれば成功です。

### ステップ3：ブラウザからの操作

1.  **Webページを開く**:
    Androidや他のPCのブラウザで、ステップ2のターミナル①に表示された**`Network`**のアドレス（例: `http://192.168.1.3:3000`）にアクセスします。

2.  **サーバーに接続**:
    - `Server IP Address`の欄に、サーバーを動かしているPCのIPアドレス（例: `192.168.1.3`）を入力します。
    - `Connect`ボタンを押します。

3.  **OSCを送信**:
    接続に成功したら、宛先のIPやOSCアドレスなどを設定してメッセージを送信します。

## 📄 ライセンス
このプロジェクトは [MIT License](https://opensource.org/licenses/MIT) の下で公開されています。
